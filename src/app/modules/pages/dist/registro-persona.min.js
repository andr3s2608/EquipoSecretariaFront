"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,l,i,c){return new(i=i||Promise)(function(t,a){function r(e){try{n(c.next(e))}catch(e){a(e)}}function o(e){try{n(c.throw(e))}catch(e){a(e)}}function n(e){e.done?t(e.value):function(t){return t instanceof i?t:new i(function(e){e(t)})}(e.value).then(r,o)}n((c=c.apply(e,l||[])).next())})},__generator=this&&this.__generator||function(a,r){var o,n,l,e,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(l=2&t[0]?n.return:t[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,t[1])).done)return l;switch(n=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,n=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(l=0<(l=i.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){i.label=t[1];break}if(6===t[0]&&i.label<l[1]){i.label=l[1],l=t;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(t);break}l[2]&&i.ops.pop(),i.trys.pop();continue}t=r.call(a,i)}catch(e){t=[6,e],n=0}finally{o=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};exports.__esModule=!0;var page_header_component_1=require("app/shared/components/page-header.component"),constants_util_1=require("app/shared/utils/constants.util"),authprovider_util_1=require("app/shared/utils/authprovider.util"),form_1=require("antd/es/form"),form_layout_util_1=require("app/shared/utils/form-layout.util"),BasicaInformacion_1=require("./components/form/BasicaInformacion"),select_component_1=require("app/shared/components/inputs/select.component"),react_1=require("react"),tabs_1=require("antd/es/tabs"),alert_1=require("antd/es/alert"),input_1=require("antd/es/input"),button_1=require("antd/es/button"),react_router_1=require("react-router"),Apis_service_1=require("app/services/Apis.service"),constants_util_2=require("app/shared/utils/constants.util"),datepicker_component_1=require("app/shared/components/inputs/datepicker.component"),app_reducers_1=require("app/redux/app.reducers"),grid_actions_1=require("app/redux/Grid/grid.actions"),TabPane=tabs_1.default.TabPane,RegistroPage=function(e){function t(e){l("170"===e),h&&o.setFieldsValue({state:3,city:179}),o.setFieldsValue({state:void 0,city:void 0,cityLive:void 0})}function a(a){return __awaiter(void 0,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return o.setFieldsValue({city:void 0}),[4,q.getMunicipio(a)];case 1:return t=e.sent(),E(t),[2]}})})}var v=react_router_1.useHistory(),r=authprovider_util_1.authProvider.getAccount(),o=(r.name,r.userName,form_1.default.useForm()[0]),n=react_1.useState(!0),h=n[0],l=n[1],i=react_1.useState([]),c=i[0],u=i[1],s=react_1.useState([]),d=s[0],p=s[1],m=react_1.useState([]),_=m[0],f=m[1],b=react_1.useState([]),y=b[0],E=b[1],P=react_1.useState([[],[]]),g=P[0],C=g[0],k=g[1],S=P[1],I=authprovider_util_1.authProvider.getAccount().accountIdentifier,q=new Apis_service_1.ApiService(I),N=react_1.useCallback(function(){return __awaiter(void 0,void 0,void 0,function(){var t,a,r;return __generator(this,function(e){switch(e.label){case 0:return[4,Promise.all([q.getMunicipio("3"),q.getDepartament(),q.getPaises()])];case 1:return t=e.sent(),a=t[0],r=t.slice(1),E(a),S(r),[2]}})})},[]),w=react_1.useCallback(function(){return __awaiter(void 0,void 0,void 0,function(){var t,a,r,o;return __generator(this,function(e){switch(e.label){case 0:return[4,Promise.all([q.GetEtnia(),q.GetSexo(),q.GetNivelEducativo()])];case 1:return t=e.sent(),a=t[0],r=t[1],o=t[2],p(a),u(r),f(o),[2]}})})},[]);react_1.useEffect(function(){N(),w()},[]);return react_1.default.createElement("div",{className:"fadeInTop container-fluid"},react_1.default.createElement(page_header_component_1.PageHeaderComponent,{title:"Registro Persona Natural.",subTitle:"Por favor registre los datos exactamente como aparecen en su documento de identidad, estos datos seran usados para la generaciòn de los Documentos asociados al trámite solicitado y su posterior reporte a entidades de vigilancia y control.",backIcon:null}),react_1.default.createElement("div",{className:"card card-body"},react_1.default.createElement("h4",{className:"app-subtitle mt-3"},"Datos Básicos."),react_1.default.createElement(form_1.default,__assign({form:o,className:"mb-4 w-100"},form_layout_util_1.layoutItems,{style:{maxWidth:800},layout:"horizontal",onFinish:function(E){return __awaiter(void 0,void 0,void 0,function(){var t,a,r,o,n,l,i,c,u,s,d,p,m,_,f,b,y;return __generator(this,function(e){switch(e.label){case 0:return t=E.confirEmail,a=E.email,t!==a?[3,3]:(r=E.ppla,o=E.Num1,n=E.letra1,l=E.Bis,i=E.card1,c=E.Num2,u=E.letra2,s=E.placa,d=E.card2,p=r+" "+o+" "+n+" "+l+" "+i+" "+c+" "+u+" "+s+" "+d,m={primerNombre:E.name,segundoNombre:(f=E.secondName,null!=f?f:""),primerApellido:E.surname,segundoApellido:(b=E.secondSurname,null!=b?b:""),tipoDocumento:E.instTipoIdent,numeroIdentificacion:Number(E.instNumIdent),telefonoFijo:(y=E.phone,null!=y?y:""),telefonoCelular:E.phonecell,email:E.email,nacionalidad:E.country,departamento:E.state,ciudadNacimientoOtro:h?"":E.cityLive,ciudadNacimiento:h?E.cityLive:0,departamentoResidencia:E.state,ciudadResidencia:E.city,direccionResidencia:p,fechaNacimiento:E.date,sexo:E.sex,genero:E.gender,orientacionSexual:E.sexual_orientation,etnia:E.ethnicity,estadoCivil:E.estadoCivil,nivelEducativo:E.levelEducation},[4,q.personaNatural(m)]);case 1:return"number"!=typeof(_=e.sent())?[3,3]:[4,q.PostRolesUser({idUser:I,idRole:"58EDA51F-7E19-47C4-947F-F359BD1FC732"})];case 2:e.sent(),localStorage.setItem(I,_.toString()),app_reducers_1.store.dispatch(grid_actions_1.SetGrid({key:"relaodMenu"})),v.push("/"),e.label=3;case 3:return[2]}})})},onFinishFailed:function(){}}),react_1.default.createElement(BasicaInformacion_1.BasicaInformacion,{form:o}),react_1.default.createElement("h4",{className:"app-subtitle mt-3"},"Datos Geográficos."),h?react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(form_1.default.Item,{label:"Nacionalidad",name:"country",initialValue:"170",rules:[{required:!0}]},react_1.default.createElement(select_component_1.SelectComponent,{options:k,optionPropkey:"idPais",optionPropLabel:"nombre",onChange:t})),react_1.default.createElement(form_1.default.Item,{label:"Departamento de nacimiento",name:"stateLive",initialValue:3,rules:[{required:h}]},react_1.default.createElement(select_component_1.SelectComponent,{options:C,optionPropkey:"idDepartamento",optionPropLabel:"descripcion",onChange:a,disabled:!h})),react_1.default.createElement(form_1.default.Item,{label:"Ciudad de nacimiento",name:"cityLive",initialValue:149,rules:[{required:h}]},react_1.default.createElement(select_component_1.SelectComponent,{options:y,optionPropkey:"idMunicipio",optionPropLabel:"descripcion",disabled:!h})),react_1.default.createElement(form_1.default.Item,{label:"Departamento de residencia",name:"state",initialValue:3,rules:[{required:h}]},react_1.default.createElement(select_component_1.SelectComponent,{options:C,optionPropkey:"idDepartamento",optionPropLabel:"descripcion",onChange:a,disabled:!h})),react_1.default.createElement(form_1.default.Item,{label:"Ciudad de residencia",name:"city",initialValue:149,rules:[{required:h}]},react_1.default.createElement(select_component_1.SelectComponent,{options:y,optionPropkey:"idMunicipio",optionPropLabel:"descripcion",disabled:!h}))):react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(form_1.default.Item,{label:"Nacionalidad",name:"country",initialValue:"170",rules:[{required:!0}]},react_1.default.createElement(select_component_1.SelectComponent,{options:k,optionPropkey:"idPais",optionPropLabel:"nombre",onChange:t})),react_1.default.createElement(form_1.default.Item,{label:"Ciudad de nacimiento",name:"cityLive",initialValue:"",rules:[{required:!0}]},react_1.default.createElement(input_1.default,{allowClear:!0,placeholder:"",autoComplete:"off"})),react_1.default.createElement(form_1.default.Item,{label:"Departamento de residencia",name:"state",rules:[{required:!0}]},react_1.default.createElement(select_component_1.SelectComponent,{options:C,optionPropkey:"idDepartamento",optionPropLabel:"descripcion",onChange:a})),react_1.default.createElement(form_1.default.Item,{label:"Ciudad de residencia",name:"city",rules:[{required:!0}]},react_1.default.createElement(select_component_1.SelectComponent,{options:y,optionPropkey:"idMunicipio",optionPropLabel:"descripcion"}))),react_1.default.createElement(alert_1.default,{message:"Información!",description:"Por favor registre su dirección de residencia tal como aparece en el recibo público,\r\n                                en las casillas indicadas para esto. Una vez completado los datos, favor dar clic sobre el botón verde Confirmar Dirección.\r\n                                Esta funcionalidad permitirá autocompletar datos de UPZ, Localidad y Barrio para las direcciones de Bogotá D.C. y\r\n                                estandarizar la dirección para el resto de ciudades.",type:"info"}),react_1.default.createElement(form_1.default.Item,{label:"Via Ppla",name:"ppla",rules:[{required:!0}]},react_1.default.createElement(select_component_1.SelectComponent,{options:constants_util_1.nomesclatura,optionPropkey:"key",optionPropLabel:"key"})),react_1.default.createElement(form_1.default.Item,{label:"Num",name:"Num1",rules:[{required:!0}]},react_1.default.createElement(input_1.default,{allowClear:!0,placeholder:"",autoComplete:"off"})),react_1.default.createElement(form_1.default.Item,{label:"letra",name:"letra1"},react_1.default.createElement(select_component_1.SelectComponent,{options:constants_util_1.letras,optionPropkey:"key",optionPropLabel:"key"})),react_1.default.createElement(form_1.default.Item,{label:"Bis",name:"Bis"},react_1.default.createElement(select_component_1.SelectComponent,{options:[{key:"Bis",value:"Bis"}],optionPropkey:"key",optionPropLabel:"value"})),react_1.default.createElement(form_1.default.Item,{label:"Card",name:"card1"},react_1.default.createElement(select_component_1.SelectComponent,{options:constants_util_1.direcionOrienta,optionPropkey:"key",optionPropLabel:"key"})),react_1.default.createElement(form_1.default.Item,{label:"Num",name:"Num2",rules:[{required:!0}]},react_1.default.createElement(input_1.default,{allowClear:!0,placeholder:"",autoComplete:"off"})),react_1.default.createElement(form_1.default.Item,{label:"letra",name:"letra2"},react_1.default.createElement(select_component_1.SelectComponent,{options:constants_util_1.letras,optionPropkey:"key",optionPropLabel:"key"})),react_1.default.createElement(form_1.default.Item,{label:"Placa",name:"placa",rules:[{required:!0}]},react_1.default.createElement(input_1.default,{allowClear:!0,placeholder:"",autoComplete:"off"})),react_1.default.createElement(form_1.default.Item,{label:"Card",name:"card2"},react_1.default.createElement(select_component_1.SelectComponent,{options:constants_util_1.direcionOrienta,optionPropkey:"key",optionPropLabel:"key"})),react_1.default.createElement("h4",{className:"app-subtitle mt-3"},"Datos Demográficos."),react_1.default.createElement(form_1.default.Item,{label:"Fecha Nacimiento",name:"date",rules:[{required:!0}]},react_1.default.createElement(datepicker_component_1.DatepickerComponent,{picker:"date",dateDisabledType:"before",dateFormatType:"default"})),react_1.default.createElement(form_1.default.Item,{label:"Sexo",name:"sex",rules:[{required:!0}]},react_1.default.createElement(select_component_1.SelectComponent,{options:c,optionPropkey:"idSexo",optionPropLabel:"descripcionSexo"})),react_1.default.createElement(form_1.default.Item,{label:"Genero",name:"gender",rules:[{required:!0}]},react_1.default.createElement(select_component_1.SelectComponent,{options:c,optionPropkey:"idSexo",optionPropLabel:"descripcionSexo"})),react_1.default.createElement(form_1.default.Item,{label:"Orientacion sexual",name:"sexual_orientation",rules:[{required:!0}]},react_1.default.createElement(select_component_1.SelectComponent,{options:c,optionPropkey:"idSexo",optionPropLabel:"descripcionSexo"})),react_1.default.createElement(form_1.default.Item,{label:"Etnia",name:"ethnicity",rules:[{required:!0}]},react_1.default.createElement(select_component_1.SelectComponent,{options:d,optionPropkey:"idEtnia",optionPropLabel:"nombre"})),react_1.default.createElement(form_1.default.Item,{label:"Estado Civil",name:"estadoCivil",rules:[{required:!0}]},react_1.default.createElement(select_component_1.SelectComponent,{options:constants_util_2.EstadoCivil,optionPropkey:"key",optionPropLabel:"name"})),react_1.default.createElement(form_1.default.Item,{label:"Nivel Educativo",name:"levelEducation",rules:[{required:!1}]},react_1.default.createElement(select_component_1.SelectComponent,{options:_,optionPropkey:"idNivelEducativo",optionPropLabel:"nombre"})),react_1.default.createElement(form_1.default.Item,__assign({},form_layout_util_1.layoutWrapper,{className:"mb-0 mt-4"}),react_1.default.createElement("div",{className:"d-flex justify-content-between"},react_1.default.createElement(button_1.default,{type:"dashed",htmlType:"button",onClick:function(){v.goBack()}},"Volver atrás"),react_1.default.createElement(button_1.default,{type:"primary",htmlType:"submit"},"Guardar"))))))};exports.default=RegistroPage;
//# sourceMappingURL=registro-persona.min.js.map
