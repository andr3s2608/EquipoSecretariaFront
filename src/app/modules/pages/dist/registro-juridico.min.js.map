{"version":3,"sources":["registro-juridico.tsx"],"names":["page_header_component_1","require","authprovider_util_1","form_1","form_layout_util_1","BasicaInformacion_1","select_component_1","react_1","tabs_1","input_1","button_1","react_router_1","Apis_service_1","grid_actions_1","app_reducers_1","TabPane","RegistroPage","props","history","useHistory","accountIdentifier","authProvider","getAccount","form","useForm","_a","useState","_b","_c","_d","api","ApiService","_e","l_tipos_documento","setListaTipoDocumento","getListas","useCallback","__awaiter","getTipoDocumeto","tipoDocumento","sent","listDocument","map","res","id","idTipoIdentificacion","descripcion","useEffect","createElement","className","PageHeaderComponent","title","subTitle","backIcon","__assign","layoutItems","style","maxWidth","layout","onFinish","value","json","primerNombre","name","segundoNombre","secondName","primerApellido","surname","segundoApellido","secondSurname","TipoIdent","numeroIdentificacion","Number","nit","telefonoFijo","phone","telefonoCelular","phonecell","email","tipoDocumentoRepresentanteLegal","instTipoIdent","numeroDocumentoRepresentanteLegal","instNumIdent","nombreRazonSocial","razonsocial","personaJuridica","resApi","putUser","oid","idPersonaVentanilla","PostRolesUser","idUser","idRole","localStorage","setItem","toString","store","dispatch","SetGrid","key","push","onFinishFailed","Item","label","rules","required","max","allowClear","placeholder","autoComplete","initialValue","SelectComponent","options","optionPropkey","optionPropLabel","type","BasicaInformacion","layoutWrapper","htmlType","onClick","goBack","exports"],"mappings":"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","file":"registro-juridico.min.js","sourcesContent":["// Componentes\r\nimport { PageHeaderComponent } from 'app/shared/components/page-header.component';\r\n\r\n// Utilidades\r\nimport { projectInfo } from 'app/shared/utils/constants.util';\r\nimport { authProvider } from 'app/shared/utils/authprovider.util';\r\nimport Form from 'antd/es/form';\r\nimport { layoutItems, layoutWrapper } from 'app/shared/utils/form-layout.util';\r\nimport { BasicaInformacion } from './components/form/BasicaInformacion';\r\nimport { SelectComponent } from 'app/shared/components/inputs/select.component';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { dominioService, ETipoDominio, IDepartamento, IDominio, IMunicipio } from 'app/services/dominio.service';\r\nimport Tabs from 'antd/es/tabs';\r\nimport Alert from 'antd/es/alert';\r\nimport Input from 'antd/es/input';\r\nimport Button from 'antd/es/button';\r\nimport { useHistory } from 'react-router';\r\nimport { ApiService } from 'app/services/Apis.service';\r\nimport { SetGrid } from 'app/redux/Grid/grid.actions';\r\nimport { store } from 'app/redux/app.reducers';\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nconst RegistroPage: React.FC<any> = (props) => {\r\n  const history = useHistory();\r\n  const { accountIdentifier } = authProvider.getAccount();\r\n  const [form] = Form.useForm<any>();\r\n  const [isColombia, setIsColombia] = useState(true);\r\n\r\n  const [l_municipios, setLMunicipios] = useState<IMunicipio[]>([]);\r\n  const [[l_departamentos_colombia, l_paises], setListas] = useState<[IDepartamento[], IDominio[]]>([[], []]);\r\n\r\n  const api = new ApiService(accountIdentifier);\r\n\r\n  const [l_tipos_documento, setListaTipoDocumento] = useState<IDominio[]>([]);\r\n\r\n  const getListas = useCallback(\r\n    async () => {\r\n      const tipoDocumento = await api.getTipoDocumeto();\r\n      const listDocument = tipoDocumento.map((res: any) => {\r\n        return { id: res.idTipoIdentificacion, descripcion: res.descripcion };\r\n      });\r\n      setListaTipoDocumento(listDocument);\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    getListas();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const goBack = () => {\r\n    history.goBack();\r\n  };\r\n  const defaultValues = {\r\n    identity: 1,\r\n    identification: ''\r\n  };\r\n  const onSubmit = async (value: any) => {\r\n    const json = {\r\n      primerNombre: value.name,\r\n      segundoNombre: value.secondName,\r\n      primerApellido: value.surname,\r\n      segundoApellido: value.secondSurname,\r\n      tipoDocumento: value.TipoIdent, //listado tipos de documentos\r\n      numeroIdentificacion: Number(value.nit),\r\n      telefonoFijo: value.phone,\r\n      telefonoCelular: value.phonecell,\r\n      email: value.email,\r\n      tipoDocumentoRepresentanteLegal: value.instTipoIdent, //listado tipos de documentos\r\n      numeroDocumentoRepresentanteLegal: Number(value.instNumIdent),\r\n      nombreRazonSocial: value.razonsocial\r\n    };\r\n\r\n    const resApi = await api.personaJuridica(json);\r\n\r\n    if (typeof resApi === 'number') {\r\n      await api.putUser({\r\n        oid: accountIdentifier,\r\n        idPersonaVentanilla: resApi,\r\n      });\r\n\r\n      await api.PostRolesUser({\r\n        idUser: accountIdentifier,\r\n        idRole: '58EDA51F-7E19-47C4-947F-F359BD1FC732'\r\n      });\r\n      localStorage.setItem(accountIdentifier, resApi.toString());\r\n      store.dispatch(SetGrid({ key: 'relaodMenu' }));\r\n      history.push('/');\r\n    }\r\n\r\n  };\r\n  const onSubmitFailed = () => { };\r\n  return (\r\n    <div className='fadeInTop container-fluid'>\r\n      <PageHeaderComponent\r\n        title={`Registro Persona Jurídica. \\n Datos Básicos.`}\r\n        subTitle={`Por favor registre los datos exactamente como aparecen en la Registro de Cámara de Comercio, estos \r\n                datos serán usados para la generación de los Documentos asociados al trámite solicitado y su posterior reporte a\r\n                entidades de vigilancia y control.`}\r\n        backIcon={null}\r\n      />\r\n\r\n      <div className='card card-body'>\r\n        <h4 className='app-subtitle mt-3'>Datos Básicos.</h4>\r\n\r\n        <Form\r\n          form={form}\r\n          className='mb-4 w-100'\r\n          {...layoutItems}\r\n          style={{ maxWidth: 800 }}\r\n          layout='horizontal'\r\n          onFinish={onSubmit}\r\n          onFinishFailed={onSubmitFailed}\r\n        >\r\n          <Form.Item label='Razón Social' name='razonsocial' rules={[{ required: true, max: 25 }]}>\r\n            <Input allowClear placeholder='Razón Social' autoComplete='off' />\r\n          </Form.Item>\r\n\r\n          <Form.Item label='Tipo Identificación' initialValue={5} name='TipoIdent' rules={[{ required: true }]}>\r\n            <SelectComponent options={l_tipos_documento} optionPropkey='id' optionPropLabel='descripcion' />\r\n          </Form.Item>\r\n\r\n          <Form.Item label='NIT' initialValue={defaultValues.identification} name='nit' rules={[{ required: true }]}>\r\n            <Input allowClear type='tel' placeholder='Número Identificación' autoComplete='off' />\r\n          </Form.Item>\r\n\r\n          <h4 className='app-subtitle mt-3'>Representante Legal.</h4>\r\n\r\n          <BasicaInformacion form={form} />\r\n\r\n          <Form.Item {...layoutWrapper} className='mb-0 mt-4'>\r\n            <div className='d-flex justify-content-between'>\r\n              <Button type='dashed' htmlType='button' onClick={goBack}>\r\n                Volver atrás\r\n              </Button>\r\n              <Button type='primary' htmlType='submit'>\r\n                Guardar\r\n              </Button>\r\n            </div>\r\n          </Form.Item>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RegistroPage;\r\n"]}